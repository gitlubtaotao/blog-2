![](https://s2.ax1x.com/2019/10/29/KRNxoR.jpg)

## Go 语言的指针

&ensp;&ensp;变量是一种使用方便的占位符，用于引用计算机地址，而在 Go 语言中可以通过 `&` 符号获取一个变量在计算机中对应的内存地址。

```go
package basic

import "fmt"

func main(){
	a := 1
	fmt.Println(&a) // 0xc4200180a0
}
```

&ensp;&ensp;一个指针变量指向了一个值的内存地址。Go 语言中的指针语法与 C++ 类似，都是使用 `*` 符号声明指针变量；

```go
package basic

import "fmt"

func main(){
	a := 1
	var p *int = &a

	fmt.Printf("获取变量内存地址 %x\n", p) // 获取变量内存地址 c4200180a0
	fmt.Printf("获取指针变量值 %v", *p) // 获取指针变量值 1
}
```

**Go 语言虽然有指针，但是没有指针算数，不能对其进行加减，但可以把指针值赋给另一个指针。这也就是 Golang 中的指针与 C++ 中指针的最大区别**。

> 可以通过将 `unsafe.Pointer` 转换为 `uintptr`，然后做变相指针运算。 `uintptr` 可以转换为整数。

### 值传递？引用传递？

&ensp;&ensp;在学习引用类型语言时，我们首先要搞清楚，当给一个函数/方法传参的时候，使用的是指传递还是引用传递。实际上，大部分引用类型语言，参数为基本类型时，使用的是值传递。也就是另外复制了一份参数到当前的函数调用栈。参数为高级类型时，使用的是引用传递。这个主要是因为虚拟机的内存管理导致的。

&ensp;&ensp;内存管理中的内存区域一般包括 堆(heap) 和 栈(stack) 主要用来存储当前调用栈用到的简单数据类型：string、boolean、int、float 等。这些类型的内存占用小，容易回收，基本上它们的值和指针占用的空间差不多，因此可以直接复制，GC 也比较容易做针对性的优化。复杂的高级类型占用的内存往往相对较大，存储在 堆(heap) 中，GC 回收率相对较低，代价也较大，因此传 引用/指针 可以避免进行成本较高的复制操作，并且节省内存，提高程序运行效率。

&ensp;&ensp;因此，在以下情况下可以考虑使用指针：

1. 需要改变参数的值；
2. 避免复制操作；
3. 节省内存；

而在 Golang 中，具体到高级类型 struct，slice，map 也各有不同。实际上，只有 struct 的使用有点复杂，slice，map，chan 都可以直接使用，不用考虑是值还是指针。
